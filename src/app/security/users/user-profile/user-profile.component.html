<form *ngIf="!changingImage" (ngSubmit)="onSubmit(userProfileForm)"
      #userProfileForm="ngForm"
      fxFlexFill [fxLayout]="'row'"
      fxLayoutAlign="center start">
  <md-card>
    <md-card-content [fxLayout]="'column'" fxFlex="600px">
      <div [fxLayout]="'column'">
        <h3>User profile</h3>
        <div fxFlex="100" [fxLayout]="'row'">
          <div [fxLayout]="'column'">
            <img
              fxLayoutAlign="center center"
              [src]="data && data.image ? data.image :  'http://placehold.it/128x128'"
              class="profile-img">
            <button
              fxLayoutAlign="center center"
              md-button
              type="button"
              (click)="changingImageClick()">Change Image</button>
          </div>
          <div fxFlex="100" [fxLayout]="'column'">
            <p [ngStyle]="{'color': 'red', 'font-size':'75%'}" align="start">
                {{error}}
            </p>
            <md-input-container>
              <input mdInput
                     fxFlex="100"
                     minlength="3"
                     placeholder="Name"
                     [(ngModel)]="user.profile.name"
                     name="name"
                     #name="ngModel">
            </md-input-container>
            <md-input-container>
              <input mdInput
                     fxFlex="100"
                     minlength="3"
                     placeholder="Surname"
                     [(ngModel)]="user.profile.surname"
                     name="surname"
                     #surname="ngModel">
            </md-input-container>
            <button
              fxLayoutAlign="start stretch"
              md-button
              type="submit"
              [disabled]="!userProfileForm.form.valid">Save</button>
          </div>
        </div>
      </div>
    </md-card-content>
  </md-card>
</form>

<form *ngIf="changingImage" (ngSubmit)="onSubmit(userProfilePictureForm)"
      #userProfilePictureForm="ngForm"
      fxFlexFill [fxLayout]="'row'"
      fxLayoutAlign="center start">
  <md-card>
    <md-card-content [fxLayout]="'column'" fxFlex="600px">
      <div *ngIf="changingImage" [fxLayout]="'column'">
        <img-cropper [image]="data" [settings]="cropperSettings"></img-cropper><br>
        <button
          fxLayoutAlign="center center"
          md-button
          type="button"
          (click)="saveNewImage()">Save</button>
        <button
          fxLayoutAlign="center center"
          md-button
          type="button"
          (click)="changingImageClickFalse()">Back</button>
      </div>
    </md-card-content>
  </md-card>
</form>






